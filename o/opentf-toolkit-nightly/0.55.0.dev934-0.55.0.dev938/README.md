# Comparing `tmp/opentf_toolkit_nightly-0.55.0.dev934-py3-none-any.whl.zip` & `tmp/opentf_toolkit_nightly-0.55.0.dev938-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,57 +1,57 @@
-Zip file size: 90066 bytes, number of entries: 55
--rw-r--r--  2.0 unx    21839 b- defN 24-Apr-11 15:23 opentf/commons/__init__.py
--rw-r--r--  2.0 unx    15899 b- defN 24-Apr-11 15:23 opentf/commons/auth.py
--rw-r--r--  2.0 unx     7828 b- defN 24-Apr-11 15:23 opentf/commons/config.py
--rw-r--r--  2.0 unx    12432 b- defN 24-Apr-11 15:23 opentf/commons/datasources.py
--rw-r--r--  2.0 unx    19251 b- defN 24-Apr-11 15:23 opentf/commons/expressions.py
--rw-r--r--  2.0 unx     5894 b- defN 24-Apr-11 15:23 opentf/commons/pubsub.py
--rw-r--r--  2.0 unx     4044 b- defN 24-Apr-11 15:23 opentf/commons/schemas.py
--rw-r--r--  2.0 unx     7134 b- defN 24-Apr-11 15:23 opentf/commons/selectors.py
--rw-r--r--  2.0 unx        0 b- defN 24-Apr-11 15:23 opentf/schemas/__init__.py
--rw-rw-rw-  2.0 unx     2105 b- defN 24-Apr-11 15:23 opentf/schemas/abac.opentestfactory.org/v1alpha1/Policy.json
--rw-rw-rw-  2.0 unx     1230 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/AgentRegistration.json
--rw-rw-rw-  2.0 unx     1366 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/AllureCollectorOutput.json
--rw-rw-rw-  2.0 unx     1239 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ChannelHandlerHooks.json
--rw-rw-rw-  2.0 unx     2174 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/EventBusConfig.json
--rw-rw-rw-  2.0 unx     2702 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionCommand.json
--rw-rw-rw-  2.0 unx     1347 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionError.json
--rw-rw-rw-  2.0 unx     3050 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionResult.json
--rw-rw-rw-  2.0 unx     1754 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorCommand.json
--rw-rw-rw-  2.0 unx     6633 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorResult.json
--rw-rw-rw-  2.0 unx     8565 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/InsightCollector.json
--rw-rw-rw-  2.0 unx     3790 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/Notification.json
--rw-rw-rw-  2.0 unx     2803 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/PluginMetadata.json
--rw-rw-rw-  2.0 unx     2875 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ProviderCommand.json
--rw-rw-rw-  2.0 unx     3878 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ProviderConfig.json
--rw-rw-rw-  2.0 unx     4259 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ProviderResult.json
--rw-rw-rw-  2.0 unx     2910 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/QualityGate.json
--rw-rw-rw-  2.0 unx     1182 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/RetentionPolicy.json
--rw-rw-rw-  2.0 unx     6301 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/SSHServiceConfig.json
--rw-rw-rw-  2.0 unx     2835 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/ServiceConfig.json
--rw-rw-rw-  2.0 unx     5031 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/Subscription.json
--rw-rw-rw-  2.0 unx     1405 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/TrackerPublisher.json
--rw-rw-rw-  2.0 unx     9899 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/Workflow.json
--rw-rw-rw-  2.0 unx     1351 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCanceled.json
--rw-rw-rw-  2.0 unx     1292 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCompleted.json
--rw-rw-rw-  2.0 unx     1577 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowResult.json
--rw-rw-rw-  2.0 unx     2232 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha2/Notification.json
--rw-rw-rw-  2.0 unx     6612 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1alpha2/SSHServiceConfig.json
--rw-rw-rw-  2.0 unx     4273 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/ExecutionCommand.json
--rw-rw-rw-  2.0 unx    10205 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/GeneratorResult.json
--rw-rw-rw-  2.0 unx     4581 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/ProviderCommand.json
--rw-rw-rw-  2.0 unx     4563 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/ProviderConfig.json
--rw-rw-rw-  2.0 unx     7494 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/ProviderResult.json
--rw-rw-rw-  2.0 unx     2850 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/ServiceConfig.json
--rw-rw-rw-  2.0 unx    15424 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta1/Workflow.json
--rw-rw-rw-  2.0 unx     3517 b- defN 24-Apr-11 15:23 opentf/schemas/opentestfactory.org/v1beta2/ServiceConfig.json
--rw-rw-rw-  2.0 unx     2423 b- defN 24-Apr-11 15:23 opentf/scripts/launch_java_service.sh
--rw-r--r--  2.0 unx    21279 b- defN 24-Apr-11 15:23 opentf/scripts/startup.py
--rw-r--r--  2.0 unx    19610 b- defN 24-Apr-11 15:23 opentf/toolkit/__init__.py
--rw-r--r--  2.0 unx    17156 b- defN 24-Apr-11 15:23 opentf/toolkit/channels.py
--rw-r--r--  2.0 unx     9320 b- defN 24-Apr-11 15:23 opentf/toolkit/core.py
--rw-rw-rw-  2.0 unx    11357 b- defN 24-Apr-11 15:23 opentf_toolkit_nightly-0.55.0.dev934.dist-info/LICENSE
--rw-r--r--  2.0 unx     1945 b- defN 24-Apr-11 15:23 opentf_toolkit_nightly-0.55.0.dev934.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Apr-11 15:23 opentf_toolkit_nightly-0.55.0.dev934.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 24-Apr-11 15:23 opentf_toolkit_nightly-0.55.0.dev934.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     5998 b- defN 24-Apr-11 15:23 opentf_toolkit_nightly-0.55.0.dev934.dist-info/RECORD
-55 files, 328812 bytes uncompressed, 80034 bytes compressed:  75.7%
+Zip file size: 91271 bytes, number of entries: 55
+-rw-r--r--  2.0 unx    21839 b- defN 24-Apr-22 09:33 opentf/commons/__init__.py
+-rw-r--r--  2.0 unx    15899 b- defN 24-Apr-22 09:33 opentf/commons/auth.py
+-rw-r--r--  2.0 unx     7828 b- defN 24-Apr-22 09:33 opentf/commons/config.py
+-rw-r--r--  2.0 unx    18234 b- defN 24-Apr-22 09:33 opentf/commons/datasources.py
+-rw-r--r--  2.0 unx    19251 b- defN 24-Apr-22 09:33 opentf/commons/expressions.py
+-rw-r--r--  2.0 unx     5894 b- defN 24-Apr-22 09:33 opentf/commons/pubsub.py
+-rw-r--r--  2.0 unx     4044 b- defN 24-Apr-22 09:33 opentf/commons/schemas.py
+-rw-r--r--  2.0 unx     7134 b- defN 24-Apr-22 09:33 opentf/commons/selectors.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-22 09:33 opentf/schemas/__init__.py
+-rw-rw-rw-  2.0 unx     2105 b- defN 24-Apr-22 09:33 opentf/schemas/abac.opentestfactory.org/v1alpha1/Policy.json
+-rw-rw-rw-  2.0 unx     1230 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/AgentRegistration.json
+-rw-rw-rw-  2.0 unx     1366 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/AllureCollectorOutput.json
+-rw-rw-rw-  2.0 unx     1239 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ChannelHandlerHooks.json
+-rw-rw-rw-  2.0 unx     2174 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/EventBusConfig.json
+-rw-rw-rw-  2.0 unx     2702 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionCommand.json
+-rw-rw-rw-  2.0 unx     1347 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionError.json
+-rw-rw-rw-  2.0 unx     3050 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ExecutionResult.json
+-rw-rw-rw-  2.0 unx     1754 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorCommand.json
+-rw-rw-rw-  2.0 unx     6633 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/GeneratorResult.json
+-rw-rw-rw-  2.0 unx     8565 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/InsightCollector.json
+-rw-rw-rw-  2.0 unx     3790 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/Notification.json
+-rw-rw-rw-  2.0 unx     2803 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/PluginMetadata.json
+-rw-rw-rw-  2.0 unx     2875 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ProviderCommand.json
+-rw-rw-rw-  2.0 unx     3878 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ProviderConfig.json
+-rw-rw-rw-  2.0 unx     4259 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ProviderResult.json
+-rw-rw-rw-  2.0 unx     2910 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/QualityGate.json
+-rw-rw-rw-  2.0 unx     1182 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/RetentionPolicy.json
+-rw-rw-rw-  2.0 unx     6301 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/SSHServiceConfig.json
+-rw-rw-rw-  2.0 unx     2835 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/ServiceConfig.json
+-rw-rw-rw-  2.0 unx     5031 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/Subscription.json
+-rw-rw-rw-  2.0 unx     1405 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/TrackerPublisher.json
+-rw-rw-rw-  2.0 unx     9899 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/Workflow.json
+-rw-rw-rw-  2.0 unx     1351 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCanceled.json
+-rw-rw-rw-  2.0 unx     1292 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowCompleted.json
+-rw-rw-rw-  2.0 unx     1577 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha1/WorkflowResult.json
+-rw-rw-rw-  2.0 unx     2232 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha2/Notification.json
+-rw-rw-rw-  2.0 unx     6612 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1alpha2/SSHServiceConfig.json
+-rw-rw-rw-  2.0 unx     4273 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/ExecutionCommand.json
+-rw-rw-rw-  2.0 unx    10205 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/GeneratorResult.json
+-rw-rw-rw-  2.0 unx     4581 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/ProviderCommand.json
+-rw-rw-rw-  2.0 unx     4563 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/ProviderConfig.json
+-rw-rw-rw-  2.0 unx     7494 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/ProviderResult.json
+-rw-rw-rw-  2.0 unx     2850 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/ServiceConfig.json
+-rw-rw-rw-  2.0 unx    15424 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta1/Workflow.json
+-rw-rw-rw-  2.0 unx     3517 b- defN 24-Apr-22 09:33 opentf/schemas/opentestfactory.org/v1beta2/ServiceConfig.json
+-rw-rw-rw-  2.0 unx     2423 b- defN 24-Apr-22 09:33 opentf/scripts/launch_java_service.sh
+-rw-r--r--  2.0 unx    21279 b- defN 24-Apr-22 09:33 opentf/scripts/startup.py
+-rw-r--r--  2.0 unx    19610 b- defN 24-Apr-22 09:33 opentf/toolkit/__init__.py
+-rw-r--r--  2.0 unx    17156 b- defN 24-Apr-22 09:33 opentf/toolkit/channels.py
+-rw-r--r--  2.0 unx     9320 b- defN 24-Apr-22 09:33 opentf/toolkit/core.py
+-rw-rw-rw-  2.0 unx    11357 b- defN 24-Apr-22 09:34 opentf_toolkit_nightly-0.55.0.dev938.dist-info/LICENSE
+-rw-r--r--  2.0 unx     1945 b- defN 24-Apr-22 09:34 opentf_toolkit_nightly-0.55.0.dev938.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-22 09:34 opentf_toolkit_nightly-0.55.0.dev938.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 24-Apr-22 09:34 opentf_toolkit_nightly-0.55.0.dev938.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     5998 b- defN 24-Apr-22 09:34 opentf_toolkit_nightly-0.55.0.dev938.dist-info/RECORD
+55 files, 334614 bytes uncompressed, 81239 bytes compressed:  75.7%
```

## zipnote {}

```diff
@@ -144,23 +144,23 @@
 
 Filename: opentf/toolkit/channels.py
 Comment: 
 
 Filename: opentf/toolkit/core.py
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev934.dist-info/LICENSE
+Filename: opentf_toolkit_nightly-0.55.0.dev938.dist-info/LICENSE
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev934.dist-info/METADATA
+Filename: opentf_toolkit_nightly-0.55.0.dev938.dist-info/METADATA
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev934.dist-info/WHEEL
+Filename: opentf_toolkit_nightly-0.55.0.dev938.dist-info/WHEEL
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev934.dist-info/top_level.txt
+Filename: opentf_toolkit_nightly-0.55.0.dev938.dist-info/top_level.txt
 Comment: 
 
-Filename: opentf_toolkit_nightly-0.55.0.dev934.dist-info/RECORD
+Filename: opentf_toolkit_nightly-0.55.0.dev938.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## opentf/commons/datasources.py

```diff
@@ -20,19 +20,56 @@
 from opentf.commons.expressions import evaluate_bool
 from opentf.toolkit.core import warning
 
 
 ########################################################################
 # Constants
 
+SUCCESS = 'SUCCESS'
+FAILURE = 'FAILURE'
+ERROR = 'ERROR'
+SKIPPED = 'SKIPPED'
+TOTAL = 'total count'
+
 DETAILS_KEYS = ('failureDetails', 'errorDetails', 'warningDetails')
-FAILURE_STATUSES = ('FAILURE', 'ERROR')
+STATUSES_ORDER = (SUCCESS, FAILURE, ERROR, SKIPPED)
+FAILURE_STATUSES = (FAILURE, ERROR)
 
 ########################################################################
-## Test results handling
+## Helpers
+
+
+def _get_path(src: Dict[str, Any], path: List[str]) -> Any:
+    if not path:
+        return src
+    try:
+        return _get_path(src[path[0]], path[1:])
+    except KeyError:
+        return 'KeyError'
+
+
+def _get_sorted_testcases(
+    testcase_metadata: Dict[str, Any], path: List[str]
+) -> Dict[str, Any]:
+    sorted_testcases = {}
+    for testcase, data in testcase_metadata.items():
+        sorted_testcases.setdefault(_get_path(data, path), {})[testcase] = data
+    return sorted_testcases
+
+
+def _get_sum_for_status(testcases: Dict[str, Any], status: str) -> int:
+    return sum(1 for testcase in testcases.values() if testcase['status'] == status)
+
+
+def _as_list(what) -> List[str]:
+    return [what] if isinstance(what, str) else what
+
+
+########################################################################
+## Datasource: Testcases
 
 
 def in_scope(expr: str, contexts: Dict[str, Any], scopes_errors: Set[str]) -> bool:
     """Safely evaluate quality gate scope."""
     try:
         return evaluate_bool(expr, contexts)
     except ValueError as err:
@@ -49,34 +86,28 @@
 
     Each notification in the list is guaranteed to have a
     `spec.testResults` entry.
     """
     return [item for item in events if _has_testresult(item)]
 
 
-def _as_list(what) -> List[str]:
-    return [what] if isinstance(what, str) else what
-
-
 def _has_testresult(item: Dict[str, Any]) -> bool:
-    """..."""
+    """Determine if a workflow notification has a testResults element."""
     return item.get('kind') == 'Notification' and item.get('spec', {}).get(
         'testResults', False
     )
 
 
 def _uses_inception(events: List[Dict[str, Any]]) -> bool:
-    """Determines if a workflow is the inception workflow."""
+    """Determine if a workflow is the inception workflow."""
     workflow_event = next(
         (event for event in events if event['kind'] == 'Workflow'), None
     )
     if not workflow_event:
-        raise ValueError(
-            'No Workflow event in workflow events, is there any event at all?'
-        )
+        raise ValueError('No Workflow event in workflow events...')
     return any(
         'inception' in _as_list(job['runs-on'])
         for job in workflow_event['jobs'].values()
     )
 
 
 def _get_inception_testresults(events: List[Dict[str, Any]]) -> List[Dict[str, Any]]:
@@ -190,15 +221,17 @@
     except IndexError:
         warning(
             f'Could not find "params" step associated to "execute" step {exec_step_id}, ignoring.'
         )
     return labels
 
 
-def _get_testresult_steporigin(attachment_origin, events) -> Optional[str]:
+def _get_testresult_steporigin(
+    attachment_origin: str, events: List[Dict[str, Any]]
+) -> Optional[str]:
     """Find the step that produced the attachment.
 
     # Required parameters
 
     - attachment_origin: a string (the attachment uuid)
     - events: a list of events
 
@@ -306,15 +339,21 @@
     # Returned value
 
     A possibly empty dictionary.  Keys are the testresult IDs, values
     are dictionaries with the following entries:
 
     - name: a string, the test case name
     - status: a string, the test case status
+    - duration: a string, the test case execution time in ms
+    - timestamp: a string, provider creation timestamp
     - test: a dictionary, the test case metadata
+    - failureDetails|errorDetails|warningDetails: a dictionary with test
+      case failure details
+    - errorsList: a Robot Framework specific list with execution general
+      errors
 
     `testcases` is a dictionary of entries like:
 
     ```
     "<<<testcase_uuid>>>": {
         "name": "<<<[Test suite#]Test case name>>>",
         "status": "<<<SUCCESS|FAILURE|ERROR|SKIPPED>>>",
@@ -360,22 +399,166 @@
             testresult['metadata']['attachment_origin'][0], events
         )
         if not labels:
             continue
         for testcase in testresult['spec']['testResults']:
             testcases[testcase['id']] = {
                 'name': testcase['name'],
-                'status': testcase['status'],
+                'status': testcase['status'].lower(),
                 'duration': testcase.get('duration', 0),
                 'test': labels.copy(),
             }
             testcases[testcase['id']]['test']['status'] = testcase['status']
             data = {}
             if testcase['status'] in FAILURE_STATUSES:
                 data = {key: testcase[key] for key in DETAILS_KEYS if testcase.get(key)}
             if testcase.get('errorsList'):
                 data['errorsList'] = testcase['errorsList']
             testcases[testcase['id']].update(data)
     if not results:
         raise ValueError('No test results in events.')
     _get_testresult_timestamps(events, testresults, testcases)
     return testcases
+
+
+########################################################################
+## Datasource: Tags
+
+
+def get_tags(
+    events: List[Dict[str, Any]], testcase_metadata: Optional[Dict[str, Any]] = None
+) -> Dict[str, Any]:
+    """Extract metadata for each execution environment tag.
+
+    # Required parameters:
+
+    - events: a list of events
+
+    # Returned value:
+
+    A dictionary. Keys are tags names, values are dictionaries with testcase
+    by tag status counters.
+
+    `tags` is a dictionary of entries like:
+
+    ```
+    "<<<tag name>>>": {
+        "FAILURE": <<<failed tests count>>>,
+        "SUCCESS": <<<passed tests count>>>,
+        "SKIPPED": <<<skipped tests count>>>,
+        "ERROR": <<<technical KO tests count>>>,
+        'total': <<<total tests count>>>,
+        'other': <<<SKIPPED + ERROR tests count>>>
+    }
+    ```
+    """
+    try:
+        testcase_metadata = testcase_metadata or get_testcases(events)
+    except ValueError as err:
+        raise ValueError(str(err) + ' Cannot extract metadata for tags.')
+    tags = {}
+    for testcase in testcase_metadata.values():
+        for tag in testcase['test']['runs-on']:
+            tags.setdefault(tag, {SUCCESS: 0, FAILURE: 0, ERROR: 0, SKIPPED: 0})
+            tags[tag][testcase['status']] += 1
+    for tag, counts in tags.items():
+        counts['total'] = sum(counts[status] for status in STATUSES_ORDER)
+        counts['other'] = sum(counts[status] for status in (SKIPPED, ERROR))
+        tags[tag] = {k.lower(): v for k, v in counts.items()}
+    return tags
+
+
+########################################################################
+## Datasource: Jobs
+
+
+def _evaluate_test_results(jobs_testcases: Dict[str, Any]) -> Dict[str, Any]:
+    """Summarize job testcases.
+
+    # Returned value
+
+    A dictionary with one entry per job (a dictionary with keys being
+    statuses and values being counts).
+    """
+    summaries = {}
+    for job, testcases in jobs_testcases.items():
+        successes, failures, errors, skipped = [
+            _get_sum_for_status(testcases, status) for status in STATUSES_ORDER
+        ]
+        summaries[job] = {
+            SUCCESS: successes,
+            FAILURE: failures,
+            ERROR: errors,
+            SKIPPED: skipped,
+            TOTAL: len(testcases),
+        }
+    return summaries
+
+
+def get_jobs(
+    events: List[Dict[str, Any]], testcase_metadata: Optional[Dict[str, Any]] = None
+) -> Dict[str, Any]:
+    """Extract metadata for each job.
+
+    # Required parameters:
+
+    - events: a list of events
+
+    # Returned value:
+
+    A dictionary. Keys are job names, values are dictionaries with the
+    following entries:
+
+    - name: a string, job name
+    - runs-on: a list, execution environment tags
+    - testcases: a dictionary, job-related test cases
+    - counts: a dictionary, tests statuses count by job
+    - variables: a dictionary, job-related environment variables
+
+    `jobs_testcases` is a dictionary of entries like:
+
+    ```
+    "<<<job_name>>>": {
+        "runs-on": [<<<execution environment tags>>>],
+        "counts": {
+            "FAILURE": <<<failed tests count>>>,
+            "SUCCESS": <<<passed tests count>>>,
+            "ERROR": <<<technical KOs count>>>,
+            "SKIPPED": <<<skipped tests count>>>,
+            "total count": <<<total tests count>>>
+        },
+        "variables": {
+            "<<<variable name>>>": "<<<variable value>>>",
+            ...
+        }
+    }
+    ```
+    """
+    try:
+        testcase_metadata = testcase_metadata or get_testcases(events)
+    except ValueError as err:
+        raise ValueError(str(err) + ' Cannot extract metadata for jobs.')
+    jobs_testcases = _get_sorted_testcases(testcase_metadata, ['test', 'job'])
+    if 'KeyError' in jobs_testcases:
+        raise ValueError('Cannot get jobs-ordered dataset from testcases.')
+    job_events = [
+        event
+        for event in events
+        if event['kind'] == 'ExecutionCommand'
+        and event['metadata']['step_sequence_id'] == -1
+        and event['metadata']['name'] in jobs_testcases
+    ]
+    results = _evaluate_test_results(jobs_testcases)
+    jobs = {}
+    for job in job_events:
+        job_name = job['metadata']['name']
+        jobs.setdefault(
+            job['metadata']['name'],
+            {
+                'runs-on': job['runs-on'],
+                'counts': {k.lower(): v for k, v in results[job_name].items()},
+                'variables': {
+                    name: value for name, value in job.get('variables', {}).items()
+                },
+            },
+        )
+    return jobs
```

## Comparing `opentf_toolkit_nightly-0.55.0.dev934.dist-info/LICENSE` & `opentf_toolkit_nightly-0.55.0.dev938.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `opentf_toolkit_nightly-0.55.0.dev934.dist-info/METADATA` & `opentf_toolkit_nightly-0.55.0.dev938.dist-info/METADATA`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: opentf-toolkit-nightly
-Version: 0.55.0.dev934
+Version: 0.55.0.dev938
 Summary: OpenTestFactory Orchestrator Toolkit
 Home-page: https://gitlab.com/henixdevelopment/open-source/opentestfactory/python-toolkit
 Author: Martin Lafaix
 Author-email: mlafaix@henix.com
 Maintainer: Henix
 Maintainer-email: opentestfactory@henix.com
 License: Apache Software License (https://www.apache.org/licenses/LICENSE-2.0)
```

## Comparing `opentf_toolkit_nightly-0.55.0.dev934.dist-info/RECORD` & `opentf_toolkit_nightly-0.55.0.dev938.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 opentf/commons/__init__.py,sha256=ITzg1zfZgA5-4wvmJfjLN94_Z06HeMl0szd6dalrrKY,21839
 opentf/commons/auth.py,sha256=bM2Z3kxm2Wku1lKXaRAIg37LHvXWAXIZIqjplDfN2P8,15899
 opentf/commons/config.py,sha256=GmvInVnUsXIwlNfgTQeQ_pPs97GeGTGn2S2QZEFwss8,7828
-opentf/commons/datasources.py,sha256=4I7i18tZOITAEW_M8_tnxILMbN9jgm3xGkFFZpjTgG8,12432
+opentf/commons/datasources.py,sha256=OkPp0allFp-G9qBkU4Fxc6aGiytkMO3Xr3KLl4E5zWM,18234
 opentf/commons/expressions.py,sha256=A68F27Our8oVVphUrRvB5haSlqj2YCrH2OxHPNLBio4,19251
 opentf/commons/pubsub.py,sha256=7khxAHVZiwJRcwIBJ6MPR-f3xY9144-2eNLROwq5F-4,5894
 opentf/commons/schemas.py,sha256=lokZCU-wmsIkzVA-TVENtC7Io_GmYxrP-FQaOOowg4s,4044
 opentf/commons/selectors.py,sha256=DEpLgRAr5HXSpSYI4liXP2hLUTvOSexFa9Vfa1xIQTk,7134
 opentf/schemas/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 opentf/schemas/abac.opentestfactory.org/v1alpha1/Policy.json,sha256=JXsfNAPSEYggeyaDutSQBeG38o4Bmcr70dPLWWeqIh8,2105
 opentf/schemas/opentestfactory.org/v1alpha1/AgentRegistration.json,sha256=NQykqU-lKE8LtBhBiFUcpVJq00MRG6dZsoM1xedx6uQ,1230
@@ -44,12 +44,12 @@
 opentf/schemas/opentestfactory.org/v1beta1/Workflow.json,sha256=QZ8mM9PhzsI9gTmwmKTWYNoRn--rtcM3L0PzgnPBfMU,15424
 opentf/schemas/opentestfactory.org/v1beta2/ServiceConfig.json,sha256=rEvK2YWL5lG94_qYgR_GnLWNsaQhaQ-2kuZdWJr5NnY,3517
 opentf/scripts/launch_java_service.sh,sha256=S0jAaCuv2sZy0Gf2NGBuPX-eD531rcM-b0fNyhmzSjw,2423
 opentf/scripts/startup.py,sha256=Da2zo93pBWbdRmj-wgekgLcF94rpNc3ZkbvR8R0w8XY,21279
 opentf/toolkit/__init__.py,sha256=g3DiTZlSvvzZWKgM8qU47muLqjQrpWZ6M6PWZ-sBsvQ,19610
 opentf/toolkit/channels.py,sha256=Cng3b4LUsxvCHUbp_skys9CFcKZMfcKhA_ODg_EAlIE,17156
 opentf/toolkit/core.py,sha256=L1fT4YzwZjqE7PUXhJL6jSVQge3ohBQv5UBb9DAC6oo,9320
-opentf_toolkit_nightly-0.55.0.dev934.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
-opentf_toolkit_nightly-0.55.0.dev934.dist-info/METADATA,sha256=2-n3O14aeuEEXrUFFACE0bo_3Nt0p82zLsJp2Y26VN0,1945
-opentf_toolkit_nightly-0.55.0.dev934.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-opentf_toolkit_nightly-0.55.0.dev934.dist-info/top_level.txt,sha256=_gPuE6GTT6UNXy1DjtmQSfCcZb_qYA2vWmjg7a30AGk,7
-opentf_toolkit_nightly-0.55.0.dev934.dist-info/RECORD,,
+opentf_toolkit_nightly-0.55.0.dev938.dist-info/LICENSE,sha256=xx0jnfkXJvxRnG63LTGOxlggYnIysveWIZ6H3PNdCrQ,11357
+opentf_toolkit_nightly-0.55.0.dev938.dist-info/METADATA,sha256=1FipCBdX1nal-7wQEMhR1QrdYvJUuPMAGcEPjLAzDco,1945
+opentf_toolkit_nightly-0.55.0.dev938.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+opentf_toolkit_nightly-0.55.0.dev938.dist-info/top_level.txt,sha256=_gPuE6GTT6UNXy1DjtmQSfCcZb_qYA2vWmjg7a30AGk,7
+opentf_toolkit_nightly-0.55.0.dev938.dist-info/RECORD,,
```

